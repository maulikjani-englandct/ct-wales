{% extends "layouts/main.html" %}

{% block pageTitle %}
{% if data['languagePreference'] == "en" %}
Pending property updates – GOV.UK Prototype Kit
{% else %}
Diweddariadau eiddo ar y gweill – GOV.UK Prototype Kit
{% endif %}
{% endblock %}

{% block header %}
{% if data['languagePreference'] == "en" %}
{{ hmrcHeader({
  homepageUrl : "/v1-7-1/start?languagePreference=en",
    signOutHref : "?sign-out",
    useTudorCrown: "true"
  }) }}

{% else %}
{{ hmrcHeader({
  homepageUrl : "/v1-7-1/start?languagePreference=cy",
    language : "cy",
    signOutHref : "?sign-out",
    useTudorCrown: "true"
  }) }}
  {% endif %}
{% endblock %}

{% block beforeContent %}

{{

  hmrcLanguageSelect({

      language: 'cy' if data['languagePreference'] === 'cy' else 'en',

      en: { href: '?languagePreference=en' },

      cy: { href: '?languagePreference=cy' }

  })

}}
{% if data['languagePreference'] == "en" %}
{{ govukBackLink({
  text: "Back",
  href: "property-details-extended?languagePreference=en"
}) }}
{% else %}
{{ govukBackLink({
  text: "Yn ôl",
  href: "property-details-extended?languagePreference=cy"
}) }}

{% endif %}
{% endblock %}

{% block content %}

{% if data['languagePreference'] == "en" %}

  <div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l">
        <span class="govuk-caption-l">19, St David's Crescent, Cardiff, CF5 4GP</span>
        New information we have about your property 
      </h1>

      <!-- {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Status"
            },
            value: {
              text: "Under review"
            }
          },
          {
            key: {
              text: "Submitted"
            },
            value: {
              text: "15 December 2025"
            }
          }
        ]
      }) }} -->

      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Changes to your property</h2>
        </div>
        <div class="govuk-summary-card__content">
          <p class="govuk-body">According to our records, there have been changes made to your property. These changes do not affect your current Council Tax band. </p>
<p class="govuk-body">They will be reviewed when the property is sold or there is a revaluation. This can result in a change to the Council Tax band.</p>

          {{ govukTable({
            firstCellIsHeader: true,
            head: [
              {
                text: ""
              },
              {
                text: "Current"
              },
              {
                text: "Future"
              }
            ],
            rows: [

              [
                {
                  text: "Size of home"
                },
                {
                  text: "90 m² (969 ft²)"
                },
                {
                  text: "110 m² (1184 ft²)"
                }
              ]
            ]
          }) }}
        </div>
      </div>

      <p class="govuk-body">
        <a href="property-details-extended?languagePreference=en" class="govuk-link">Return to property details</a>
      </p>

    </div>
  </div>


  {% else %}
  <div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-l">
        <span class="govuk-caption-l">19, St David's Crescent, Cardiff, CF5 4GP</span>
        Pending property updates
      </h1>

      {{ govukSummaryList({
        rows: [
          {
            key: {
              text: "Status"
            },
            value: {
              text: "Under review"
            }
          },
          {
            key: {
              text: "Submitted"
            },
            value: {
              text: "15 December 2025"
            }
          }
        ]
      }) }}

      <div class="govuk-summary-card">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Submitted changes</h2>
        </div>
        <div class="govuk-summary-card__content">
          <p class="govuk-body">If these changes are accepted, they may affect the Council Tax band.</p>

          {{ govukTable({
            firstCellIsHeader: true,
            head: [
              {
                text: ""
              },
              {
                text: "Current"
              },
              {
                text: "Submitted"
              }
            ],
            rows: [
              [
                {
                  text: "Bedrooms"
                },
                {
                  text: "2"
                },
                {
                  text: "5"
                }
              ],
              [
                {
                  text: "Bathrooms"
                },
                {
                  text: "1"
                },
                {
                  text: "2"
                }
              ],
              [
                {
                  text: "Size of home"
                },
                {
                  text: "90 m² (969 ft²)"
                },
                {
                  text: "110 m² (1184 ft²)"
                }
              ]
            ]
          }) }}
        </div>
      </div>

      <p class="govuk-body">
        <a href="property-details-extended?languagePreference=cy" class="govuk-link">Return to property details</a>
      </p>

    </div>
  </div>

  {% endif %}

<script>
  // Handle language switching without creating new history entries
  document.addEventListener('DOMContentLoaded', function() {
    var langLinks = document.querySelectorAll('.hmrc-language-select__list-item a');

    langLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var newUrl = this.href;
        // Replace current history state instead of pushing new one
        history.replaceState(null, '', newUrl);
        // Reload page to show new language
        window.location.reload();
      });
    });
  });
</script>
{% endblock %}
