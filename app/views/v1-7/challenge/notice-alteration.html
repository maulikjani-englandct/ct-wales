{% extends "layouts/main.html" %}

{% block pageTitle %}
{% if data['languagePreference'] == "en" %}
Have you received a Notice of Alteration within the last six months? – GOV.UK Prototype Kit
 {% else %}
Wyt ti wedi derbyn Hysbysiad o Newid yn ystod y chwe mis diwethaf? – GOV.UK Prototype Kit
 {% endif %}
{% endblock %}

{% block header %}
{% if data['languagePreference'] == "en" %}
{{ hmrcHeader({
  homepageUrl : "/v1-7/start?languagePreference=en",
    signOutHref : "?sign-out",
    useTudorCrown: "true"
  }) }}

{% else %}
{{ hmrcHeader({
  homepageUrl : "/v1-7/start?languagePreference=cy",
    language : "cy",
    signOutHref : "?sign-out",
    useTudorCrown: "true"
  }) }}
  {% endif %}
{% endblock %}
{% block beforeContent %}

{{

  hmrcLanguageSelect({

      language: 'cy' if data['languagePreference'] == 'cy' else 'en',

      en: { href: '?languagePreference=en' },

      cy: { href: '?languagePreference=cy' }

  })

}}
{% if data['languagePreference'] == "en" %}
{{ govukBackLink({
  text: "Back",
  href: "how-long-lived?languagePreference=en"
}) }}
{% else %}
{{ govukBackLink({
  text: "Yn ôl",
  href: "how-long-lived?languagePreference=cy"
}) }}

{% endif %}
{% endblock %}

{% block content %}
{% if data['languagePreference'] == "en" %}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <form action="/v1-7/noticealt" method="post" novalidate>
          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" aria-describedby="noticeAlteration-hint">
             <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                        <h1 class="govuk-fieldset__heading">
                          Have you received a Notice of Alteration within the last six months?
                        </h1>
                      </legend>
              <div id="noticeAlteration-hint" class="govuk-hint">
                A Notice of Alteration is a letter sent by the Valuation Office Agency (VOA) if any change to the valuation list has been made.
              </div>
              <div class="govuk-radios" data-module="govuk-radios">
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="noticeAlteration-yes" name="noticeAlteration" type="radio" value="yes">
                  <label class="govuk-label govuk-radios__label" for="noticeAlteration-yes">Yes</label>
                </div>
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="noticeAlteration-no" name="noticeAlteration" type="radio" value="no">
                  <label class="govuk-label govuk-radios__label" for="noticeAlteration-no">No</label>
                </div>
              </div>
            </fieldset>
          </div>
          
          <button class="govuk-button" data-module="govuk-button" type="submit">Continue</button>
          {% else %}
              <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <form action="/v1-7/noticealt" method="post" novalidate>
          <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" aria-describedby="noticeAlteration-hint">
             <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                        <h1 class="govuk-fieldset__heading">
                          Wyt ti wedi derbyn Hysbysiad o Newid yn ystod y chwe mis diwethaf?
                        </h1>
                      </legend>
              <div id="noticeAlteration-hint" class="govuk-hint">
                Mae Hysbysiad o Newid yn lythyr sy’n cael ei anfon gan Asiantaeth y Swyddfa Brisio os yw newid wedi bod i'r Rhestr Brisio. </div>
              <div class="govuk-radios" data-module="govuk-radios">
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="noticeAlteration-yes" name="noticeAlteration" type="radio" value="yes">
                  <label class="govuk-label govuk-radios__label" for="noticeAlteration-yes">Ydw</label>
                </div>
                <div class="govuk-radios__item">
                  <input class="govuk-radios__input" id="noticeAlteration-no" name="noticeAlteration" type="radio" value="no">
                  <label class="govuk-label govuk-radios__label" for="noticeAlteration-no">Nac ydw</label>
                </div>
              </div>
            </fieldset>
          </div>
          <button class="govuk-button" data-module="govuk-button" type="submit">Parhau</button>
          {% endif %}
        </form>
      </div>
    </div>


<script>
  // Handle language switching without creating new history entries
  document.addEventListener('DOMContentLoaded', function() {
    var langLinks = document.querySelectorAll('.hmrc-language-select__list-item a');

    langLinks.forEach(function(link) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var newUrl = this.href;
        // Replace current history state instead of pushing new one
        history.replaceState(null, '', newUrl);
        // Reload page to show new language
        window.location.reload();
      });
    });
  });
</script>
{% endblock %}
